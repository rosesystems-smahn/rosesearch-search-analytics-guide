

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>로그분석기 API 매뉴얼 &mdash; rosesearch-search-analytics 0.0.1v documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="prev" title="로그분석기 통합매뉴얼" href="../../ch02-analytics-manuals/ko/README.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> rosesearch-search-analytics
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Search Analytics:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ch01-start-shutdown/ko/README.html">로그분석기 구동 및 정지</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch02-analytics-manuals/ko/README.html">로그분석기 통합매뉴얼</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">로그분석기 API 매뉴얼</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">rosesearch-search-analytics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>로그분석기 API 매뉴얼</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/common/ch03-analytics-api/ko/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api">
<h1>로그분석기 API 매뉴얼<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>목차<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li>통계입력 API</li>
<li>통계결과 API</li>
<li>이벤트 입력 API</li>
<li>사용자속성 입력 API</li>
<li>추천 API</li>
</ol>
<p><span></span></p>
<ol class="simple">
<li>통계입력 API</li>
</ol>
<p>이 장에서는 통계데이터의 입력방법과 그 역할에 대해 설명한다.</p>
</div>
<div class="section" id="id2">
<h2>1.1. 검색통계데이터 입력<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>검색 클라이언트 에서 검색 직후에 검색결과를 통계서버에 전달 해 주어야 한다, fastcat-analytics 는 전달 방법으로 http 프로토콜을 이용하며, 전달 방법은 다음과 같다.</p>
<p>URL : <code class="docutils literal notranslate"><span class="pre">http://[서버</span> <span class="pre">IP]:[서버</span> <span class="pre">PORT]/service/keyword/hit/post</span></code></p>
<p>표 1 파라메터 목록</p>
<table>
<tr>
	<th>용도구분</th>
	<th>파라메터</th>
	<th>역할</th>
	<th>예</th>
	<th>기타</th>
</tr>
<tr>
	<td rowspan=3>기본</td>
		<td>type</td>
		<td>search</td>
		<td>search</td>
		<td>search로 고정값</td>
</tr>
<tr>
		<td>siteId</td>
		<td>siteId 값</td>
		<td>www</td>
		<td>conf/sites.xml 의 siteId</td>
</tr>
<tr>
		<td>categoryId</td>
		<td>categoryId 값</td>
		<td>cat1</td>
		<td>Site하위 카테고리 ID</td>
</tr>
<tr>
		<td>검색유입경로</td>
		<td>searchService</td>
		<td>검색유입 서비스ID</td>
		<td>totalSearch</td>
		<td> 검색이 유입된 서비스명.<br/>  Attibute설정에 입력해둔 서비스ID를 사용한다. </td></tr>
<tr>
	<td rowspan=4>검색횟수통계<br/>  인기키워드<br/>  연관키워드</td>
		<td>keyword</td>
		<td>입력된 키워드</td>
		<td>12인치 노트북</td>
		<td>utf-8로 인코딩된 문자</td>
</tr>
<tr>
		<td>prev</td>
		<td>이전 키워드</td>
		<td>최신 노트북</td>
		<td>utf-8로 인코딩된 문자</td>
</tr>
<tr>
		<td>resptime</td>
		<td>검색엔진 응답시간</td>
		<td>130</td>
		<td>millisecond 단위로 전달</td>
</tr>
<tr>
		<td>resultCount</td>
		<td>검색결과 개수</td>
		<td>10</td>
		<td>검색 결과의 수를 입력한다.<br>(결과가 없을 시에는 0)</td>
</tr>
<tr>
	<td rowspan=7>비율통계</td>
		<td>category</td>
		<td>타입별 분류 입력</td>
		<td>가전/컴퓨터</td>
		<td>카테고리명 전달용</td>
</tr>
<tr>
		<td>page</td>
		<td>페이지구분</td>
		<td>1</td>
		<td>검색페이지 이동시 페이지 값 전달용</td>
</tr>
<tr>
		<td>sort</td>
		<td>정렬구분</td>
		<td>가격순</td>
		<td>검색옵션 변경 시 정렬값 전달용</td>
</tr>
<tr>
		<td>service</td>
		<td>서비스 구분</td>
		<td>통합검색</td>
		<td>통합검색인지, 그 밖에 상세검색인지 전달용</td>
</tr>
<tr>
		<td>login</td>
		<td>로그인여부 구분</td>
		<td>로그인</td>
		<td>검색대상이 로그인 된 사용자인지 구분 전달용</td>
</tr>
<tr>
		<td>age</td>
		<td>연령대 구분</td>
		<td>30대</td>
		<td>로그인 사용자의 연령대 구분 전달용</td>
</tr>
<tr>
		<td>gender</td>
		<td>성별구분</td>
		<td>남자</td>
		<td>로그인 된 사용자의 성별구분 전달용</td>
</tr>
</table><div class="section" id="id3">
<h3>예시<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8050/service/keyword/hit/post?type=search&amp;siteId=www&amp;categoryId=cat1&amp;searchService=totalSearch&amp;keyword=12인치 노트북&amp;prev=최신 노트북&amp;resptime=130&amp;resultCount=10&amp;category=가전/컴퓨터&amp;page=1&amp;sort=가격순&amp;age=30대&amp;service=통합검색&amp;login=일반&amp;gender=남성
</pre></div>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>1.2. 클릭통계데이터 입력<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>사용자가 검색결과문서를 클릭한 내용은 어떠한 문서가 검색키워드의 결과로 적합한지를 결정하는데 도움을 줄 수 있다. fastcat-analytics는 사용자의 클릭로그를 분석하여 통계내는 기능을 제공한다.</p>
<p>호출 API는 다음과 같다.
URL : <code class="docutils literal notranslate"><span class="pre">http://[서버</span> <span class="pre">IP]:[서버</span> <span class="pre">PORT]/service/ctr/click/post</span></code></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>용도구분</th>
<th>파라메터</th>
<th>역할</th>
<th>예</th>
<th>기타</th>
</tr>
</thead>
<tbody>
<tr>
<td>Click-through Rate</td>
<td>siteId</td>
<td>siteId 값</td>
<td>www</td>
<td>conf/sites.xml 의 siteId</td>
</tr>
<tr>
<td></td>
<td>keyword</td>
<td>검색키워드</td>
<td>USB메모리</td>
<td></td>
</tr>
<tr>
<td></td>
<td>clickId</td>
<td>클릭문서 아이디</td>
<td>462496566</td>
<td>어떠한 문서를 클릭했는지 정보를 기록한다.</td>
</tr>
<tr>
<td></td>
<td>clickType</td>
<td>클릭문서 타입</td>
<td>view_blog</td>
<td>Attibute설정에 입력해둔 클릭타입ID를 사용한다.</td>
</tr>
</tbody>
</table>
<h2>1.3. 통계 데이터의 처리</h2><p>실시간 인기 키워드는 5분마다 1번씩 집계되며, 나머지 일별 통계는 1일 1회 (0시) 집계 된다.</p>
<ol class="simple">
<li>통계결과 API</li>
</ol>
<p>인기검색어, 연관검색어의 API</p>
</div>
<div class="section" id="id5">
<h2>2.1. 실시간 인기검색어<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>URI : <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/service/keyword/popular/rt.xml</span></code></p>
<p>표 1 실시간 인기검색어 파라미터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>Nullable</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>N</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>Y</td>
</tr>
</tbody>
</table>
<p><strong>샘플요청URL</strong></p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8050/service/keyword/popular/rt.xml?siteId=total&amp;categoryId=_root
</pre></div>
</div>
<p><strong>샘플결과포맷</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="nt">&lt;response&gt;</span>
  <span class="nt">&lt;siteId&gt;</span>total<span class="nt">&lt;/siteId&gt;</span>
  <span class="nt">&lt;categoryId/&gt;</span>
  <span class="nt">&lt;list&gt;</span>
	<span class="nt">&lt;item&gt;</span>
	  <span class="nt">&lt;rank&gt;</span>1<span class="nt">&lt;/rank&gt;</span>
	  <span class="nt">&lt;word&gt;</span>해리포터<span class="nt">&lt;/word&gt;</span>
	  <span class="nt">&lt;diffType&gt;</span>EQ<span class="nt">&lt;/diffType&gt;</span>
	  <span class="nt">&lt;diff&gt;</span>0<span class="nt">&lt;/diff&gt;</span>
	  <span class="nt">&lt;count&gt;</span>89<span class="nt">&lt;/count&gt;</span>
	  <span class="nt">&lt;countDiff&gt;</span>0<span class="nt">&lt;/countDiff&gt;</span>
	<span class="nt">&lt;/item&gt;</span>
	..중략..
	<span class="nt">&lt;item&gt;</span>
	  <span class="nt">&lt;rank&gt;</span>10<span class="nt">&lt;/rank&gt;</span>
	  <span class="nt">&lt;word&gt;</span>원피스<span class="nt">&lt;/word&gt;</span>
	  <span class="nt">&lt;diffType&gt;</span>EQ<span class="nt">&lt;/diffType&gt;</span>
	  <span class="nt">&lt;diff&gt;</span>0<span class="nt">&lt;/diff&gt;</span>
	  <span class="nt">&lt;count&gt;</span>62<span class="nt">&lt;/count&gt;</span>
	  <span class="nt">&lt;countDiff&gt;</span>-18<span class="nt">&lt;/countDiff&gt;</span>
	<span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
<span class="nt">&lt;/response&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h2>2.2. 인기검색어<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>URI : <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/service/keyword/popular.xml</span></code></p>
<p>표 2 서비스용 인기검색어 파라미터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>필수</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>O</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>X</td>
</tr>
<tr>
<td>timeType</td>
<td>일자별 = D<br/>주간별 = W<br/> 월별 = M<br/>년도별 = Y</td>
<td>O</td>
</tr>
<tr>
<td>interval</td>
<td>이전 시간대.<br/>timeType이 D일때 interval이 1이면 이전날짜.<br/> timeType이 W일때 interval이 1이면 이전주.</td>
<td>O</td>
</tr>
</tbody>
</table>
<p><strong>샘플 이전일 일간 인기검색어 요청URL</strong></p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8050/service/keyword/popular.xml?siteId=total&amp;categoryId=_root&amp;timeType=D&amp;interval=1
</pre></div>
</div>
<p><strong>샘플 이전주 주간 인기검색어 요청URL</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8050/service/keyword/popular.xml?siteId=total&amp;categoryId=_root&amp;timeType=W&amp;interval=1
</pre></div>
</div>
<p><strong>샘플결과포맷</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="nt">&lt;response&gt;</span>
  <span class="nt">&lt;siteId&gt;</span>total<span class="nt">&lt;/siteId&gt;</span>
  <span class="nt">&lt;categoryId&gt;</span>_root<span class="nt">&lt;/categoryId&gt;</span>
  <span class="nt">&lt;timeType&gt;</span>D<span class="nt">&lt;/timeType&gt;</span>
  <span class="nt">&lt;time&gt;</span>D<span class="nt">&lt;/time&gt;</span>
  <span class="nt">&lt;list&gt;</span>
	<span class="nt">&lt;item&gt;</span>
	  <span class="nt">&lt;rank&gt;</span>1<span class="nt">&lt;/rank&gt;</span>
	  <span class="nt">&lt;word&gt;</span>축구<span class="nt">&lt;/word&gt;</span>
	  <span class="nt">&lt;diffType&gt;</span>UP<span class="nt">&lt;/diffType&gt;</span>
	  <span class="nt">&lt;diff&gt;</span>1<span class="nt">&lt;/diff&gt;</span>
	  <span class="nt">&lt;count&gt;</span>1555<span class="nt">&lt;/count&gt;</span>
	  <span class="nt">&lt;countDiff&gt;</span>0<span class="nt">&lt;/countDiff&gt;</span>
	<span class="nt">&lt;/item&gt;</span>
	.. 중략 ..
	<span class="nt">&lt;item&gt;</span>
	  <span class="nt">&lt;rank&gt;</span>10<span class="nt">&lt;/rank&gt;</span>
	  <span class="nt">&lt;word&gt;</span>하이스쿨<span class="nt">&lt;/word&gt;</span>
	  <span class="nt">&lt;diffType&gt;</span>DN<span class="nt">&lt;/diffType&gt;</span>
	  <span class="nt">&lt;diff&gt;</span>2<span class="nt">&lt;/diff&gt;</span>
	  <span class="nt">&lt;count&gt;</span>713<span class="nt">&lt;/count&gt;</span>
	  <span class="nt">&lt;countDiff&gt;</span>0<span class="nt">&lt;/countDiff&gt;</span>
	<span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
<span class="nt">&lt;/response&gt;</span>
</pre></div>
</div>
<p>표. 날짜조회용 인기검색어 파라미터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>필수</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>O</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>X</td>
</tr>
<tr>
<td>interval</td>
<td>날짜 조회용은 고정값 0</td>
<td>O</td>
</tr>
<tr>
<td>timeId</td>
<td>특정조회일자. 형식은 [Type]yyyyMMdd.<br/>예) D20140705, W201428, M201407, Y2014</td>
<td>O</td>
</tr>
<tr>
<td>sn</td>
<td>시작번호. 1부터 시작.</td>
<td>O</td>
</tr>
<tr>
<td>ln</td>
<td>가져올 키워드 갯수</td>
<td>O</td>
</tr>
</tbody>
</table>
<p><strong>덤프용 인기검색어</strong></p><p>일자 기간별 인기검색어를 일괄적으로 내려받아야 할때 사용한다.</p>
<p>URI : <code class="docutils literal notranslate"><span class="pre">/service/keyword/popular/dump.xml</span></code></p>
<p>표. 덤프용 인기검색어 파라미터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>필수</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>O</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>X</td>
</tr>
<tr>
<td>from</td>
<td>시작일자. 형식은 yyyy.MM.dd</td>
<td>O</td>
</tr>
<tr>
<td>to</td>
<td>끝일자. 형식은 yyyy.MM.dd</td>
<td>O</td>
</tr>
<tr>
<td>ln</td>
<td>가져올 키워드 상위 N개의 갯수.</td>
<td>O</td>
</tr>
</tbody>
</table></div>
<div class="section" id="id7">
<h2>2.3. 연관검색어<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>URI : <code class="docutils literal notranslate"><span class="pre">/service/keyword/relate.xml</span></code></p>
<p>표 3 연관검색어 파라미터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>Nullable</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>N</td>
</tr>
<tr>
<td>keyword</td>
<td>기준 검색어</td>
<td>N</td>
</tr>
</tbody>
</table>
<p><strong>샘플요청URL</strong></p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8050/service/keyword/relate.xml?siteId=total&amp;keyword=원피스
</pre></div>
</div>
<p><strong>샘플결과포맷</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="nt">&lt;response&gt;</span>
  <span class="nt">&lt;siteId&gt;</span>total<span class="nt">&lt;/siteId&gt;</span>
  <span class="nt">&lt;service&gt;</span>RELATE_KEYWORD<span class="nt">&lt;/service&gt;</span>
  <span class="nt">&lt;keyword&gt;</span>원피스<span class="nt">&lt;/keyword&gt;</span>
  <span class="nt">&lt;relate&gt;</span>
	<span class="nt">&lt;item&gt;</span>ts<span class="nt">&lt;/item&gt;</span>
	<span class="nt">&lt;item&gt;</span>나루토<span class="nt">&lt;/item&gt;</span>
	<span class="nt">&lt;item&gt;</span>동방<span class="nt">&lt;/item&gt;</span>
	<span class="nt">&lt;item&gt;</span>헌터<span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/relate&gt;</span>
<span class="nt">&lt;/response&gt;</span>
</pre></div>
</div>
<ol class="simple">
<li>이벤트 입력 API</li>
</ol>
<p>사용자의 행동을 학습하고 추천모델을 생성하기 위해서는 먼저 이벤트를 입력받아야 한다. 이벤트는 관리도구에서 <code class="docutils literal notranslate"><span class="pre">사이트</span> <span class="pre">&gt;</span> <span class="pre">구성</span> <span class="pre">&gt;</span> <span class="pre">이벤트설정</span></code> 에서 추가하도록 한다.</p>
<p>URL : <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/service/events</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> 
	<span class="s2">&quot;siteId&quot;</span> <span class="p">:</span> <span class="s2">&quot;사이트 ID&quot;</span><span class="p">,</span> 		<span class="o">//</span><span class="n">필수</span>
	<span class="s2">&quot;categoryId&quot;</span> <span class="p">:</span> <span class="s2">&quot;카테고리 ID&quot;</span><span class="p">,</span> 	<span class="o">//</span><span class="n">하위분류</span>
	<span class="s2">&quot;event&quot;</span> <span class="p">:</span> <span class="s2">&quot;이벤트명&quot;</span><span class="p">,</span> 		<span class="o">//</span> <span class="n">설정한</span> <span class="n">이벤트</span> <span class="n">타입중</span> <span class="n">하나를</span> <span class="n">입력한다</span><span class="o">.</span>
	<span class="s2">&quot;userId&quot;</span> <span class="p">:</span> <span class="s2">&quot;사용자 ID&quot;</span><span class="p">,</span>		<span class="o">//</span> <span class="n">사용자</span> <span class="n">번호</span> <span class="p">(</span><span class="n">정수값</span><span class="p">)</span>
	<span class="s2">&quot;itemId&quot;</span> <span class="p">:</span> <span class="s2">&quot;아이템 ID&quot;</span><span class="p">,</span> 		<span class="o">//</span> <span class="n">아이템</span> <span class="n">번호</span> <span class="p">(</span><span class="n">정수값</span><span class="p">)</span>
	<span class="s2">&quot;properties&quot;</span> <span class="p">:</span> <span class="p">[]</span> 		<span class="o">//</span><span class="n">추가값으로</span> <span class="n">통계생성에서</span> <span class="n">필요시</span> <span class="n">array</span> <span class="n">로</span> <span class="n">입력한다</span><span class="o">.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>** 여기서 사용되는 category 는 인기검색어 통계분석에서 사용되는 카테고리와는 별도이다.</p>
<ol class="simple">
<li>추천 API</li>
</ol>
</div>
<div class="section" id="id8">
<h2>4.1 아이템 추천<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>이벤트 API를 통해 쌓인 로그를 학습하여 생성된 모델을 통해 추천결과를 보여주는 API이다.
요청한 사용자에 대해서 가장 적합한 아이템을 추천할 때 사용한다.</p>
<p>URL : <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/service/recommendation/items</span></code></p>
<p>표. 파라메터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>필수</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>O</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>O</td>
</tr>
<tr>
<td>user</td>
<td>사용자 (정수)</td>
<td>O</td>
</tr>
<tr>
<td>count</td>
<td>추천받을 갯수 (정수)</td>
<td>O</td>
</tr>
</tbody>
</table><p><strong>결과</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
	<span class="p">{</span> 
		<span class="s2">&quot;user&quot;</span> <span class="p">:</span> <span class="s2">&quot;사용자&quot;</span><span class="p">,</span>		<span class="o">//</span><span class="n">사용자</span> <span class="n">번호</span>
		<span class="s2">&quot;item&quot;</span> <span class="p">:</span> <span class="s2">&quot;아이템&quot;</span><span class="p">,</span>		<span class="o">//</span><span class="n">아이템</span> <span class="n">번호</span>
		<span class="s2">&quot;rating&quot;</span> <span class="p">:</span> <span class="s2">&quot;평가점수&quot;</span>	<span class="o">//</span><span class="n">학습을</span> <span class="n">통한</span> <span class="n">예상평가점수</span>
	<span class="p">},</span>
	<span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h2>4.2 사용자 추천<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>요청한 아이템에 가장 어울리는 사용자를 추천할 때 사용한다. 아이템 추천과 달리 아이템 번호로 사용자를 추천해준다.</p>
<p>URL : <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/service/recommendation/users</span></code></p>
<p>표. 파라메터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>필수</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>O</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>O</td>
</tr>
<tr>
<td>item</td>
<td>아이템 (정수)</td>
<td>O</td>
</tr>
<tr>
<td>count</td>
<td>추천받을 갯수 (정수)</td>
<td>O</td>
</tr>
</tbody>
</table><p><strong>결과</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
	<span class="p">{</span> 
		<span class="s2">&quot;item&quot;</span> <span class="p">:</span> <span class="s2">&quot;아이템&quot;</span><span class="p">,</span>		<span class="o">//</span><span class="n">아이템</span> <span class="n">번호</span>
		<span class="s2">&quot;user&quot;</span> <span class="p">:</span> <span class="s2">&quot;사용자&quot;</span><span class="p">,</span>		<span class="o">//</span><span class="n">사용자</span> <span class="n">번호</span>
		<span class="s2">&quot;rating&quot;</span> <span class="p">:</span> <span class="s2">&quot;평가점수&quot;</span>	<span class="o">//</span><span class="n">학습을</span> <span class="n">통한</span> <span class="n">예상평가점수</span>
	<span class="p">},</span>
	<span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
<ol class="simple">
<li>그룹기반 인기상품 추천 API</li>
</ol>
<p>앞서본 4장의 아이템 추천이 개인에 대한 추천이라고 한다면, 그룹기반은 개인이 속한 그룹에 대하여 아이템을 추천해주는 방식이다. 또한 아이템 추천은 협업필터 방식인데 반해 이 그룹기반 추천은 해당 그룹에서 가장 인기가 많은 (가중치가 높은) 아이템을 추천해준다.</p>
</div>
<div class="section" id="id10">
<h2>5.1 사용자속성 입력<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p>개인이 어떠한 그룹에 속하였는지 알아야 하므로, 사용자속성을 추천엔진에 입력해 주어야 한다. 다음의 경우 호출이 필요하다.</p>
<ul class="simple">
<li>추천엔진 초기도입시 기존의 모든회원에 대해 입력 (신규생성)</li>
<li>회원가입시 (신규생성)</li>
<li>회원정보변경시 (업데이트)</li>
</ul>
<p>URL : <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/service/users</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> 
	<span class="s2">&quot;siteId&quot;</span> <span class="p">:</span> <span class="s2">&quot;사이트 ID&quot;</span><span class="p">,</span> 		<span class="o">//</span><span class="n">필수</span>
	<span class="s2">&quot;categoryId&quot;</span> <span class="p">:</span> <span class="s2">&quot;카테고리 ID&quot;</span><span class="p">,</span> 	<span class="o">//</span><span class="n">하위분류</span>
    <span class="s2">&quot;userId&quot;</span> <span class="p">:</span> <span class="s2">&quot;유저 ID&quot;</span><span class="p">,</span> 		<span class="o">//</span><span class="n">필수</span>
	<span class="s2">&quot;커스텀 ID&quot;</span> <span class="p">:</span> <span class="s2">&quot;커스텀 ID&quot;</span><span class="p">,</span>		<span class="o">//</span> <span class="n">사용자가</span> <span class="n">설정한</span> <span class="n">속성들을</span> <span class="n">이곳에</span> <span class="n">전달</span><span class="o">.</span>
	<span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>예) 사용자 속성에 <code class="docutils literal notranslate"><span class="pre">country</span></code>, <code class="docutils literal notranslate"><span class="pre">age</span></code>, <code class="docutils literal notranslate"><span class="pre">gender</span></code> 3개를 설정했다면 아래와 같이 호출한다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> 
	<span class="s2">&quot;siteId&quot;</span> <span class="p">:</span> <span class="s2">&quot;www&quot;</span><span class="p">,</span>
	<span class="s2">&quot;categoryId&quot;</span> <span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
	<span class="s2">&quot;userId&quot;</span> <span class="p">:</span> <span class="s2">&quot;MEM0001&quot;</span><span class="p">,</span>
	<span class="s2">&quot;country&quot;</span> <span class="p">:</span> <span class="s2">&quot;KR&quot;</span><span class="p">,</span>
	<span class="s2">&quot;age&quot;</span> <span class="p">:</span> <span class="s2">&quot;30s&quot;</span><span class="p">,</span>
	<span class="s2">&quot;gender&quot;</span> <span class="p">:</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h2>5.2 그룹 아이템 추천<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>URL : <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/service/recommendation/popular/user/items</span></code></p>
<p>표. 파라메터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>필수</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>O</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>X</td>
</tr>
<tr>
<td>userId</td>
<td>유저 ID</td>
<td>O</td>
</tr>
<tr>
<td>count</td>
<td>출력 아이템 개수</td>
<td>X</td>
</tr>
<tr>
<td>timeId</td>
<td>통계 기준 일자 ID</td>
<td>X</td>
</tr>
</tbody>
</table><p>예) 유저 ID가 <code class="docutils literal notranslate"><span class="pre">100</span></code>인 유저가 속한 그룹의 <code class="docutils literal notranslate"><span class="pre">medical</span></code> 카테고리 추천 아이템을 가져오려면 아래와 같이 호출한다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/service/recommendation/popular/user/items?
siteId=www&amp;
categoryId=medical&amp;
userId=100&amp;
count=10
</pre></div>
</div>
<p><strong>결과</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;siteId&quot;</span><span class="p">:</span> <span class="s2">&quot;www&quot;</span><span class="p">,</span>
    <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
    <span class="s2">&quot;userId&quot;</span><span class="p">:</span> <span class="s2">&quot;100&quot;</span><span class="p">,</span>
    <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRM20s&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
    <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRM20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.6</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRM20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.4</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRM20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.2</span>
        <span class="p">},</span>
        <span class="o">....</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id">
<h2>5.2 유저 ID 기준 그룹 아이템 추천<a class="headerlink" href="#id" title="Permalink to this headline">¶</a></h2>
<p>URL : <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/service/recommendation/popular/user/items</span></code></p>
<p>표. 파라메터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>필수</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>O</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>X</td>
</tr>
<tr>
<td>userId</td>
<td>유저 ID</td>
<td>O</td>
</tr>
<tr>
<td>count</td>
<td>출력 아이템 개수</td>
<td>X</td>
</tr>
<tr>
<td>timeId</td>
<td>통계 기준 일자 ID</td>
<td>X</td>
</tr>
</tbody>
</table><p>예) 유저 ID가 <code class="docutils literal notranslate"><span class="pre">100</span></code>인 유저가 속한 그룹의 <code class="docutils literal notranslate"><span class="pre">medical</span></code> 카테고리 추천 아이템을 가져오려면 아래와 같이 호출한다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/service/recommendation/popular/user/items?
siteId=www&amp;
categoryId=medical&amp;
userId=100&amp;
count=10
</pre></div>
</div>
<p><strong>결과</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;siteId&quot;</span><span class="p">:</span> <span class="s2">&quot;www&quot;</span><span class="p">,</span>
    <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
    <span class="s2">&quot;userId&quot;</span><span class="p">:</span> <span class="s2">&quot;100&quot;</span><span class="p">,</span>
    <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRM20s&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
    <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRM20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.6</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRM20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.4</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRM20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.2</span>
        <span class="p">},</span>
        <span class="o">....</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h2>5.3 그룹 아이템 추천<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p>URL : <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/service/recommendation/popular/group/items</span></code></p>
<p>표. 파라메터 목록</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Parameter</th>
<th>설명</th>
<th>필수</th>
</tr>
</thead>
<tbody>
<tr>
<td>siteId</td>
<td>사이트 ID</td>
<td>O</td>
</tr>
<tr>
<td>categoryId</td>
<td>카테고리 ID</td>
<td>X</td>
</tr>
<tr>
<td>count</td>
<td>출력 아이템 개수</td>
<td>X</td>
</tr>
<tr>
<td>timeId</td>
<td>통계 기준 일자 ID</td>
<td>X</td>
</tr>
<tr>
<td>커스텀 ID</td>
<td>사용자가 설정한 속성들을 이곳에 전달한다.</td>
<td>O</td>
</tr>
</tbody>
</table><p>예) country가 <code class="docutils literal notranslate"><span class="pre">KR</span></code>, gender가 <code class="docutils literal notranslate"><span class="pre">F</span></code>, age가 <code class="docutils literal notranslate"><span class="pre">20s</span></code>에 해당되는 그룹의 <code class="docutils literal notranslate"><span class="pre">medical</span></code> 카테고리 추천 아이템을 가져오려면 아래와 같이 호출한다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/service/recommendation/popular/group/items?
siteId=www&amp;
categoryId=medical&amp;
count=10&amp;
country=KR&amp;
gender=F&amp;
age=20s
</pre></div>
</div>
<p><strong>결과</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;siteId&quot;</span><span class="p">:</span> <span class="s2">&quot;www&quot;</span><span class="p">,</span>
    <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
    <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRF20s&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
    <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRF20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.9</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRF20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.4</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;categoryId&quot;</span><span class="p">:</span> <span class="s2">&quot;medical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;userGroupId&quot;</span><span class="p">:</span> <span class="s2">&quot;KRF20s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timeId&quot;</span><span class="p">:</span> <span class="s2">&quot;D20171211&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mf">0.4</span>
        <span class="p">},</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>끝.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../../ch02-analytics-manuals/ko/README.html" class="btn btn-neutral float-left" title="로그분석기 통합매뉴얼" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, RoseSystems

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>